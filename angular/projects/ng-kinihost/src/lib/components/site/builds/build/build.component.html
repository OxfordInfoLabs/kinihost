<div class="grid grid-desktop my3 px1">

    <ng-template [ngIf]="site">

        <h4 class="ml1">Site manager: {{site.title}} | <span>Build Details</span></h4>

        <div class="px1">
            <ng-template [ngIf]="build">
                <p><b>Target: </b>{{build.buildTarget}}</p>
                <p><b>Created: </b>{{moment.unix(build.createdDate.timestamp).format('DD/MM/YYYY HH:mm:ss')}}</p>
                <p><b>Queued: </b>{{moment.unix(build.queuedDate.timestamp).format('DD/MM/YYYY HH:mm:ss')}}</p>
                <p><b>Started: </b>{{moment.unix(build.startedDate.timestamp).format('DD/MM/YYYY HH:mm:ss')}}</p>
                <p><b>Completed: </b>{{moment.unix(build.completedDate.timestamp).format('DD/MM/YYYY HH:mm:ss')}}</p>

                <p *ngIf="build.failureMessage" style="color: darkred">
                    {{build.failureMessage}}
                </p>

                <p><b>Build Type:</b></p>
                <mat-accordion *ngIf="build.buildType === 'SOURCE_UPLOAD'">
                    <mat-expansion-panel>
                        <mat-expansion-panel-header>
                            <mat-panel-title>
                                Source upload
                            </mat-panel-title>
                            <mat-panel-description>
                                View the files uploaded in this build
                            </mat-panel-description>
                        </mat-expansion-panel-header>

                        <table>
                            <thead>
                            <tr>
                                <th>Change Type</th>
                                <th>File</th>
                            </tr>
                            </thead>
                            <tbody>
                            <tr *ngFor="let change of build.data.changedObjects">
                                <td>{{change.changeType}}</td>
                                <td>{{change.objectKey}}</td>
                            </tr>
                            </tbody>
                        </table>

                    </mat-expansion-panel>

                </mat-accordion>

            </ng-template>
        </div>





    </ng-template>


</div>
